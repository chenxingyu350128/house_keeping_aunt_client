(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d64bb72","chunk-46e2629e"],{"04aa":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{staticClass:"alertBox-cpnt",attrs:{persistent:"","max-width":"290"},model:{value:t.showIt,callback:function(e){t.showIt=e},expression:"showIt"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle-1 font-weight-bold primary--text"},[t._v(" "+t._s(t.title)+" ")]),a("v-card-text",{staticClass:"d-flex flex-column align-center py-4"}),a("v-card-actions",{staticClass:"d-flex"},[a("v-btn",{staticClass:"flex-fill",attrs:{color:"primary darken-1",outlined:""},on:{click:function(e){return t.$emit("cancel")}}},[t._v("取消")]),a("v-btn",{staticClass:"flex-fill",attrs:{dark:"",color:"primary darken-1"},on:{click:function(e){return t.$emit("certain")}}},[t._v("确定")])],1)],1)],1)},n=[],i={props:{title:{type:String,required:!0},showIt:{type:Boolean,default:!1}}},r=i,o=(a("eaab"),a("2877")),c=a("6544"),l=a.n(c),d=a("8336"),u=a("b0af"),h=a("99d9"),v=a("169a"),p=Object(o["a"])(r,s,n,!1,null,null,null);e["a"]=p.exports;l()(p,{VBtn:d["a"],VCard:u["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VDialog:v["a"]})},"0d86":function(t,e,a){"use strict";var s=a("793f"),n=a.n(s);n.a},"23f4":function(t,e,a){t.exports=a.p+"img/ynfLogo.3e25f66a.png"},"39e5":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-cpnt white"},[a("iHeader",{attrs:{text:"个人设置"},on:{hide:function(e){return t.$emit("hide")}}}),a("div",{staticClass:"d-flex flex-column align-center justify-center py-6"},[a("v-avatar",{attrs:{size:"21.33vw"}},[a("v-img",{attrs:{"max-height":"21.33vw","max-width":"21.33vw",src:t.avatar||t.defaultAvatar},on:{click:function(e){t.showImageSelect=!0}}})],1),a("span",{staticClass:"caption grey--text mt-2"},[t._v("点击修改头像")])],1),a("div",{staticClass:"white px-6 py-2 d-flex align-center justify-space-between subtitle-2",on:{click:function(e){t.showBindPhone=!0}}},[a("span",[t._v("绑定手机号")]),a("div",{staticClass:"d-flex align-center caption"},[a("span",[t._v(t._s(t.userName))]),a("v-icon",{staticClass:"ml-2",attrs:{dense:""}},[t._v("mdi-chevron-right")])],1)]),a("v-divider"),a("div",{staticClass:"white px-6 py-2 d-flex align-center justify-space-between subtitle-2",on:{click:function(e){t.showWxbind=!0}}},[a("span",[t._v("微信授权")]),a("div",{staticClass:"d-flex align-center caption"},[a("span",{class:{"primary--text":!t.wechatType}},[t._v(t._s(t.wechatType?"已绑定":"未绑定"))]),a("v-icon",{staticClass:"ml-2",attrs:{dense:""}},[t._v("mdi-chevron-right")])],1)]),a("v-divider"),a("div",{staticClass:"white px-6 py-2 d-flex align-center justify-space-between subtitle-2"},[a("span",[t._v("清空缓存")]),a("div",{staticClass:"d-flex align-center caption"},[a("v-icon",{staticClass:"ml-2",attrs:{dense:""}},[t._v("mdi-chevron-right")])],1)]),a("v-divider"),a("div",{staticClass:"white px-6 py-2 d-flex align-center justify-space-between subtitle-2",on:{click:function(e){t.showAboutUs=!0}}},[a("span",[t._v("关于我们")]),a("div",{staticClass:"d-flex align-center caption"},[a("v-icon",{staticClass:"ml-2",attrs:{dense:""}},[t._v("mdi-chevron-right")])],1)]),a("v-footer",{staticClass:"white pa-0",attrs:{fixed:"",bottom:""}},[a("v-btn",{attrs:{tile:"",dark:"",depressed:"",block:"",color:"primary"},on:{click:function(e){t.preLogout=!0,t.showWxbind=!0}}},[t._v("退出登录")])],1),a("alertBox",{attrs:{showIt:t.showWxbind,title:t.preLogout?"是否确认退出登录？":t.wechatType?"确定要解绑微信吗？":"确定要绑定微信吗？"},on:{cancel:function(e){t.showWxbind=!1},certain:t.alertBoxCertain}}),a("v-bottom-sheet",{attrs:{persistent:""},model:{value:t.showImageSelect,callback:function(e){t.showImageSelect=e},expression:"showImageSelect"}},[a("v-sheet",{staticClass:"text-center pa-4"},[a("v-btn",{staticClass:"mt-4",attrs:{block:"",depressed:"",color:"primary",dark:""},on:{click:function(e){return t.getImage(1)}}},[t._v("拍照")]),a("v-btn",{staticClass:"mt-4",attrs:{block:"",depressed:"",color:"primary",dark:""},on:{click:function(e){return t.getImage(0)}}},[t._v("从相册中选取")]),a("v-btn",{staticClass:"mt-4",attrs:{block:"",outlined:"",color:"primary",dark:""},on:{click:function(e){t.showImageSelect=!1}}},[t._v("取消")])],1)],1),a("v-dialog",{attrs:{fullscreen:"",persistent:""},model:{value:t.showBindPhone,callback:function(e){t.showBindPhone=e},expression:"showBindPhone"}},[a("div",{staticClass:"fill-height white v-pt45"},[a("iHeader",{attrs:{text:"手机号换绑"},on:{hide:function(e){t.showBindPhone=!1}}}),a("div",{staticClass:"mx-8"},[t.unBind?a("v-text-field",{attrs:{placeholder:"请输入要绑定的手机号",prefix:"新手机号",type:"tel"},model:{value:t.newUserName,callback:function(e){t.newUserName=e},expression:"newUserName"}}):a("v-text-field",{attrs:{readonly:"",placeholder:"请输入手机号",prefix:"当前手机号",type:"number"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}}),a("v-text-field",{staticClass:"vCode",attrs:{placeholder:"请输入短信验证码",prefix:"验证码",type:"tel"},scopedSlots:t._u([{key:"append",fn:function(){return[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.seconds,expression:"seconds"}],attrs:{"x-small":"",dark:"",color:"#06C1AE"}},[t._v(t._s(t.seconds)+"s")]),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.seconds,expression:"!seconds"}],attrs:{"x-small":"",dark:"",outlined:"",color:"primary"},on:{click:t.getCode}},[t._v("获取")])]},proxy:!0}]),model:{value:t.vCode,callback:function(e){t.vCode=e},expression:"vCode"}}),a("v-btn",{staticClass:"subtitle-2 mb-4",attrs:{tile:"",block:"",dark:"",depressed:"",color:"#06C1AE"},on:{click:t.btnCertain}},[t._v(t._s(t.unBind?"确认绑定":"下一步"))])],1)],1)]),t.showAboutUs?a("aboutUs",{on:{hide:function(e){t.showAboutUs=!1}}}):t._e()],1)},n=[],i=(a("96cf"),a("1da1")),r=a("aa63"),o=a("04aa"),c=a("d8e8"),l={components:{iHeader:r["a"],alertBox:o["a"],aboutUs:c["default"]},data:function(){return{newUserName:"",preLogout:!1,seconds:0,unBind:!1,vCode:"",timer:null,defaultAvatar:a("a6fb"),showImageSelect:!1,showWxbind:!1,showBindPhone:!1,showAboutUs:!1}},computed:{exitable:function(){var t=this,e=["showWxbind","showBindPhone","showAboutUs","showImageSelect"],a=!0;return e.forEach((function(e){t[e]&&(a=!1)})),a},wechatType:function(){return this.$store.state.user.wechatType},userName:function(){return this.$store.state.user.userName},avatar:function(){return this.$store.state.user.image}},watch:{exitable:{handler:function(t){t?(document.addEventListener("backbutton",this.runBack,!1),document.removeEventListener("backbutton",this.hideCpnt,!1)):(this.exitState=0,document.addEventListener("backbutton",this.hideCpnt,!1),document.removeEventListener("backbutton",this.runBack,!1))},immediate:!0}},beforeDestroy:function(){document.removeEventListener("backbutton",this.runBack,!1),document.removeEventListener("backbutton",this.hideCpnt,!1)},methods:{runBack:function(){this.$emit("hide")},logout:function(){this.$store.commit("USER_LOG_OUT"),this.$router.push("/login")},hideCpnt:function(){var t=this,e=["showWxbind","showBindPhone","showAboutUs","showImageSelect"];e.forEach((function(e){t[e]&&(t[e]=!1)}))},alertBoxCertain:function(){var t=this;if(this.preLogout)this.logout();else if(this.showWxbind=!1,this.wechatType){var e={auntId:this.$store.state.user.auntId,token:this.$store.state.user.token};this.$http.post("/other/updateWechat",e).then((function(e){e.data.success&&(t.$toast.success(e.data.msg),t.$store.commit("CHANGE_SINGLE_STATE",["wechatType",0]))}))}else{var a=this;Wechat.isInstalled((function(t){if(t){var e="snsapi_userinfo",s="_"+ +new Date,n={auntId:a.$store.state.user.auntId};Wechat.auth(e,s,(function(t){n.code=t.code,a.$http.post("/other/updateWx",n).then((function(t){t.data.success&&(a.$store.commit("CHANGE_SINGLE_STATE",["wechatType",1]),a.$toast.success(t.data.msg))}))}),(function(t){console.error("Failed: "+t)}))}}),(function(t){console.error("Failed: "+t)}))}},checkPhone:function(t){if(!/^1[3456789]\d{9}$/.test(t))return!0},getCode:function(){var t=this;if(!this.unBind||this.newUserName)if(this.unBind&&this.checkPhone(this.newUserName))this.$toast.warning("手机号格式有误，请重填");else{var e={phone:this.unBind?this.newUserName:this.userName};this.$http.get("/member/loginMsg",{params:e}).then((function(e){e.data.success&&(t.$toast.success("验证码已发送"),t.seconds=60,t.timer=setInterval((function(){t.seconds--,0===t.seconds&&clearInterval(t.timer)}),1e3))}))}else this.$toast.error("请输入手机号码")},btnCertain:function(){var t=this,e={auntId:this.$store.state.user.auntId,token:this.$store.state.user.token,yzcode:this.vCode};if(this.vCode)if(this.unBind){if(!this.newUserName)return void this.$toast.error("请输入要绑定的新手机号");if(this.checkPhone(this.newUserName))return void this.$toast.error("手机号格式有误，请重填");e.phone=this.newUserName,this.$http.post("/other/updatePhone",e).then((function(e){e.data.success&&(t.$toast.success("换绑成功,请使用新号码登录"),t.$store.commit("USER_LOG_OUT"),t.$router.push("/login"))}))}else e.phone=this.userName,this.$http.get("/other/findPhone",{params:e}).then((function(e){e.data.success&&(t.vCode="",clearInterval(t.timer),t.seconds=0,t.unBind=!0)}));else this.$toast.error("请输入短信验证码")},getImage:function(t){var e=this;this.showImageSelect=!1,navigator.camera.getPicture((function(t){e.avatarChange(t)}),(function(t){e.msg="error: because"+t}),{quality:100,destinationType:Camera.DestinationType.FILE_URI,encodingType:Camera.EncodingType.JPEG,mediaType:Camera.MediaType.PICTURE,correctOrientation:!0,targetWidth:100,sourceType:1===t?Camera.PictureSourceType.CAMERA:Camera.PictureSourceType.PHOTOLIBRARY})},avatarChange:function(t){var e=this,a=new FileTransfer,s=new FileUploadOptions;s.fileKey="file",s.fileName="cxx.jpg",s.headers={token:this.$store.state.user.token};var n="http://192.168.1.101:8092/housewife/home/real/fileUpload";a.upload(t,encodeURI(n),(function(t){console.log("success",t);var a=JSON.parse(t.response).obj.url;e.updateAvatar(a)}),(function(t){console.log("fail",t)}),s)},updateAvatar:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={auntId:this.$store.state.user.auntId,img:e},t.next=3,this.$http.post("/other/updateImg",a);case 3:s=t.sent,s.data.success&&(this.$toast.success(s.data.msg),this.avatar=s.data.obj.img,this.$store.commit("CHANGE_SINGLE_STATE",["image",s.data.obj.img]));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},d=l,u=(a("0d86"),a("2877")),h=a("6544"),v=a.n(h),p=a("8212"),f=a("288c"),m=a("8336"),b=a("169a"),w=a("ce7e"),g=a("553a"),x=a("132d"),C=a("adda"),y=a("8dd9"),_=a("8654"),k=Object(u["a"])(d,s,n,!1,null,null,null);e["default"]=k.exports;v()(k,{VAvatar:p["a"],VBottomSheet:f["a"],VBtn:m["a"],VDialog:b["a"],VDivider:w["a"],VFooter:g["a"],VIcon:x["a"],VImg:C["a"],VSheet:y["a"],VTextField:_["a"]})},"793f":function(t,e,a){},"8ce9":function(t,e,a){},"99d9":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return c}));var s=a("b0af"),n=a("80d2"),i=Object(n["f"])("v-card__actions"),r=Object(n["f"])("v-card__subtitle"),o=Object(n["f"])("v-card__text"),c=Object(n["f"])("v-card__title");s["a"]},a6fb:function(t,e,a){t.exports=a.p+"img/defaultAvatar.30a33bcb.png"},b49c:function(t,e,a){},c66e:function(t,e,a){"use strict";var s=a("b49c"),n=a.n(s);n.a},ce7e:function(t,e,a){"use strict";a("a4d3"),a("4de4"),a("e439"),a("dbb4"),a("b64b"),a("159b");var s=a("ade3"),n=(a("8ce9"),a("7560"));function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e["a"]=n["a"].extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(t){var e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:r({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:r({role:"separator","aria-orientation":e},this.$attrs),on:this.$listeners})}})},d8e8:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"aboutUs-cpnt white"},[a("iHeader",{attrs:{text:"关于我们"},on:{hide:function(e){return t.$emit("hide")}}}),a("div",{staticClass:"d-flex align-center flex-column py-6"},[a("v-img",{attrs:{"max-height":"21.33vw","max-width":"21.33vw",src:t.logo},on:{click:function(e){t.showImageSelect=!0}}}),a("span",{staticClass:"caption my-2"},[t._v("管家婆服务端")]),a("v-btn",{attrs:{"x-small":"",outlined:"",dark:"",rounded:"",color:"primary"}},[t._v("v"+t._s(t.version))])],1),a("div",{staticClass:"white px-6 py-2 d-flex align-center justify-space-between subtitle-2"},[a("span",[t._v("官方网站")]),a("div",{staticClass:"d-flex align-center caption"},[a("span",{staticClass:"primary--text"},[t._v("http://www.yinaf.com")]),a("v-icon",{staticClass:"ml-2",attrs:{dense:""}},[t._v("mdi-chevron-right")])],1)]),a("div",{staticClass:"white px-6 py-2 d-flex align-center justify-space-between subtitle-2"},[a("span",[t._v("客服电话")]),a("div",{staticClass:"d-flex align-center caption",on:{click:t.phoneCall}},[a("span",{staticClass:"primary--text"},[t._v(t._s(t.serviceTel))]),a("v-icon",{staticClass:"ml-2",attrs:{dense:""}},[t._v("mdi-chevron-right")])],1)]),a("div",{staticClass:"white px-6 py-2 d-flex align-center justify-space-between subtitle-2",on:{click:t.protocol}},[a("span",[t._v("用户协议")]),a("div",{staticClass:"d-flex align-center caption"},[a("v-icon",{staticClass:"ml-2",attrs:{dense:""}},[t._v("mdi-chevron-right")])],1)])],1)},n=[],i=a("aa63"),r={name:"",components:{iHeader:i["a"]},data:function(){return{logo:a("23f4"),version:"1.0.1",serviceTel:"0591-86393690"}},methods:{phoneCall:function(){location.href="tel:"+this.serviceTel},protocol:function(){var t="http://mobile.yinaf.com/page/agreement.html",e=cordova.InAppBrowser.open(t,"_blank","location=no");e.addEventListener("exit",(function(){StatusBar.backgroundColorByHexString("#06C1AE")})),e.addEventListener("loadstop",(function(){StatusBar.backgroundColorByHexString("#fff")}))}}},o=r,c=(a("c66e"),a("2877")),l=a("6544"),d=a.n(l),u=a("8336"),h=a("132d"),v=a("adda"),p=Object(c["a"])(o,s,n,!1,null,null,null);e["default"]=p.exports;d()(p,{VBtn:u["a"],VIcon:h["a"],VImg:v["a"]})},eaab:function(t,e,a){"use strict";var s=a("eea1"),n=a.n(s);n.a},eea1:function(t,e,a){}}]);
//# sourceMappingURL=chunk-0d64bb72.77b504ef.js.map